\section{Fundamental Graph Routing}
\label{fundamental}
In this section I will describe the fundamentals of graph routing and introduce definitions and terminology that I will use throughout this thesis.\\

In order to be able to reason about \manet, we will have to model it. To do this I will use the graph. A graph $G$ is a set of \emph{nodes} $V$ and set of \emph{edges} $E$. An edge may have a cost to use -- often refereed to as the edge's \emph{weight}. The nodes are represented as points, while the edges are represented as line-segments, that uses two points as its end-points. In this thesis I will only work with graphs that exist in the plane. I find this to be a reasonable simplification, since it makes the graphs far simpler to reason about, but also because almost all the literature about \manet and \anet I have been able to find does the same. \todo{define face}

The object of routing in any network is to send a \emph{message} -- which contains both the data to be delivered, but also the meta-data needed for routing, like last visited node --- from its origin, in this thesis defined as the \emph{source}, to some destination node, the \emph{sink}. The ordered set of nodes that the messages passes while it is being routed from the source to the sink will in this thesis be defined as the \emph{path}. In most routing algorithms, the goal is to find the \emph{shortest path} from the source to the sink, where the shortest path can either be the path that contains the fewest nodes, or the path that has the least weight. In cases where the weight of all edges is 1, as I will assume in this thesis, these are the same. 

In some cases there may be multiple sources and sinks, but in this thesis I will focus only on the cases where there is one of each. I will now introduce the terms I will use to describe the network.

\tikfig{node_different_radius}{Two nodes with different broadcast ranges. Node a is not adjacent to node b, but node b is adjacent to node a -- thus only one-way communication from b to a can take place.}

Given two nodes $n_x$ and $n_y$ in the graph, I will say that $n_x$ is \emph{adjacent} to $n_y$, iff $n_x$ can send a message to $n_y$ directly (i.e. $n_y$ lies within the range of $n_x$ transmitter). However, just because $n_x$ is adjacent to $n_y$ does not mean that the two nodes can communicate with each other\footnote{Two-way communication is important, since in most routing protocols, $n_x$ would need a confirmation that $n_y$ did indeed receive its message, this might be impossible with one-way communication.} since we do not know whether or not $n_x$'s transmitter is more powerful than $n_y$'s -- see figure~\ref{fig:node_different_radius}. 

One way to avoid this problem is to apply the \uga. The \uga states that all nodes has a perfect omni-directional transmission, that they all spend the same amount of power on the transmission, and that ``the energy disapates as the square of distance'' \cite{practical}.

However, more generally I will say that two nodes nodes $n_x$ and $n_y$ can only communicate if there exists a \emph{bidirectional link} between the nodes, and that a bidirectional link exist iff $n_x$ is adjacent to $n_y$ and $n_y$ is adjacent to $n_x$.

\tikfig{connec-route}{Figure~\ref{fig:nodes} shows a set of nodes. The circle indicates the range of node a's transmission -- all the other nodes has the same range, but have been omited for clarity's sake. Figure~\ref{fig:connec} shows us the connectivity graph given the nodes and transmission radius indicated in figure~\ref{fig:nodes}. Figure~\ref{fig:routing_not_planar} and \ref{fig:routing_planar} are examples of routing graph, a subset of the connectivity graph. Since figure~\ref{fig:routing_planar} is planar, it would be preferred over figure~\ref{fig:routing_not_planar}.}

Now we can begin to define the \emph{connectivity graph}. Given a set of nodes $V$ the connectivity graph C is defined as $C = (V, E)$, where the set of edges $E$ contains an edge between node $n_x$ and $n_y$ iff there is a bidirectional link between $n_x$ and $n_y$ -- see figure~\ref{fig:connec}. It is important to note that the connectivity graph only tells us which nodes that can communicate, not how the graph is going to route the message. Therefore I introduce the \emph{Routing Graph} R, where $R = (V, E^{\prime})$, where $E^{\prime} \subseteq E$. It is this graph $R$ that the message will have to navigate in order to find a path from the source to the sink.

\tikfig{graphTop}{An example of the difference between Geometrical and Topological movement. For clarity I have opted not to include node c's transmission radius. In \ref{fig:graphTop2} node b has moved around inside the intersection of node a and node c's transmission radius, but since there has been no change in which nodes node b is adjacent to, b is still a neighbour to both nodes. In \ref{fig:graphTop3} node b has moved outside of node a's transmission radius, but is still inside node c's radius, changing the topology of the graph.}

Since we are dealing with mobile units, the topology of the graph may change as the nodes move around, which means that there must be a mechanism that updates the topology. Since each node has an area it can monitor, its \emph{transmission area}, we will have to be careful to distinguish between \emph{Geometrical movement}, where the node moves, but the topology of the network stays the same, and \emph{Topological movement}, where the movement of the node causes a change in the topology. I have illustrated the difference in figure~\ref{fig:graphTop}. 

In the rest of the thesis assume we are working in an idealised world, where the transmission radius is a perfect unit disc, and that the radio transmission does not decrease by the distance. This is of course not the case in the real world, but it makes the reasoning much easier\todo{work on this}.

\subsection{Mathematical terminology}
\defi{Given two nodes $n_x$ and $n_y$ in the plane. Then $\overline{n_xn_y}$ will indicate that there is an edge between node $n_x$ and $n_y$.}
\defi{Let $x$ be an edge in the graph, then $|x|$ is the length of $x$ in the Euclidean space.}
