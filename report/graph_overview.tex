%\documentclass[letter, 12pt, english, draft]{article}
%\usepackage{mikkel}
%\usepackage[ruled,vlined]{algorithm2e}

%\title{Energy Affluent Mobile Ad-Hoc Networks}
%\author{Mikkel Kj√¶r Jensen}
%\date{\today}
%\begin{document}

%\pagestyle{plain}

\section{Routing graph}
Having defined our problem in Section~\ref{fundamental}, I will in this section describe some of the different kinds of Routing graphs that can be used for \manet, and will describe the one I have used for this thesis. Furthermore I will give an introduction to single, second, and multi-level routing node organisation. 

In the literature I have read, I have not been able to find a consensus on how the optimal graph for \manet should be structured. It is furthermore my experience that the structure of the graph heavily influences the routing algorithm, making the two heavily dependant on each other.

\subsection{Single-level graphs}
The first important question to answer should be whether the graph should be planar or not. A planar graph is defined as a graph that can be embedded in the plane. One of the properties of a planar embedding is that no edge will cross another edge. As we saw in figure~\ref{fig:routing_not_planar} and \ref{fig:routing_planar}, that in the non-planar graph, each node can communicate directly with more nodes, compared to the planar graph. However, since it is harder to reason about non-planar graphs, I will chose only to work with planar graphs. \hide{\footnote{For instance if we let $v$ be the number of vertices's, $f$ the number of faces and $e$ the number of edges then $v - e + f = 2$. Thus we can begin to reason about the ratio of the different parts of the graph given at least one of them}, and many routing algorithms makes\todo{see if I can justify this}.}. This of course means that I must now take pains to ensure that the graph will remain planar for its lifetime.

I have found the following methods for making the planar graphs:

\begin{description}
\item[The \gabe:] Two nodes $n_1$ and $n_2$ only share an edge iff the circle that has $\overline{n_1n_2}$ as its diameter does not contain a node $n_3$ \cite{gopher}. 
\item[The \rng:] Two nodes $n_1$ and $n_2$ share an edge if there is no node $n_3$ such that $|\overline{n_1n_3}|, |\overline{n_2n_3}| \leq |\overline{n_1n_2}|$ (i.e. $n_3$ is closer to both $n_1$ and $n_2$ than $n_1$ and $n_2$ are to each other).
\end{description}

Both \gabe and \rng are based on the Unit graph assumption, and can therefore have problems in real world situations, accidentally removing edges that should otherwise have been there\cite{practical}.

\begin{description}
\item[The \cldp:] \cldp works by having each node uses \emph{the right-hand-rule}\footnote{The right-hand-rule states that for routing graphs, if you chose to go to the right each time you have a choice, you will eventually end up where you started.} and checks whether or not any of its links crosses/is crossed by another edge. \cldp does is not dependent on the Unit graph assumption \cite{practical}. 
\end{description}

\tikfig{graph_comparison}{\ref{fig:rng1} and \ref{fig:rng2} are examples of the RNG, while \ref{fig:gg1} and \ref{fig:gg2} are examples of the GG. This figure is inspired by figure~7 in \cite{GeoSpanners}.}

It is not immediately apparent how one would compare the groups created by these three algorithms. \cldp is especially hard to compare to the others given, that it is very much affected by the run-time behaviour of the transmission between the nodes. It is however clear that the \rng is slightly more accepting than the \gabe. See figure~\ref{fig:graph_comparison} for an example of the \rng and the \

Neither the \manet or the \anet can be said to be entirely static. Even in an \anet, where we assume the nodes remain stationary, every single node will eventually run out of energy or fail. The routing graph must therefore always have a maintenance system that can deal with changes to the underlying graph. 

To complicate matter further different nodes can have different communications radius as exemplified in figure~\ref{fig:node_different_radius}, which shows us that a node needs to confirm that it indeed has a bidirectional link to each of its adjacent nodes, and cannot take it for granted.

\tikfig{different_radius}{A node with different broadcast ranges. The first solid circle is the default broadcast range of node a, which does not reach node b. The second circle is the maximum range that a can broadcast, which does reach node b.}

Likewise it is important to remember that a node in practise might be able to adjust its communications range (at a higher energy cost). See figure~\ref{fig:different_radius}\todo{improve this}.

\subsection{Two-Level graphs}
\label{cluster methods}
Node Clustering is a hierarchical alternative to the flat graph. Instead of having every node being the same, a number of nodes are made into \ch such that all nodes in the graph has 1 cluster head that they communicate with. Most of the time the nodes that belong to a certain \ch is its one-hop neighbours, but there are also schemes that allows nodes to have a clustered that is farther away, in order to reduce the number of \ch. With \ch a layer specialisation and hierarchy is added to the network, which reduces the complexity of an otherwise entirely flat network, while still retaining some decentralisation.

In order to improve the routing, \ch are almost always accompanied by \emph{gateway nodes}. Gateway nodes are nodes that connect two clusters. \cite{spanners} defines a gateway node as follows:
Let C(p) be the set of nodes that has the cluster p as its \ch (this includes p). Then for a pair of \ch s $c_1, c_2$ if there exists a pair of nodes $p_1 \in C(c_1), p_2 \in C(c_2)$ such that $p_1$ and $p_2$ can communicate with each other in the graph, then $p_1$ and $p_2$ are gateway nodes (and in particular they are the only gateway nodes between $c_1$ and $c_2$.  

Some of the practical advantages are:
\begin{itemize}
\item Depending on the implemented location schemes, the \ch can cut down on the number of necessary transmissions needed to check whether nodes are alive or not.
\item It can make routing simpler, since all transmissions will have to go though the node gateways or up through the chain of \ch s. Only the \ch and gateway nodes needs to have their location database updated. All data will of course till have to be transmitted through regular nodes, but instead of having to route directly from the source to the sink, it will route from \ch to gateway, gateway to \ch and so on until it reaches the sink.
\end{itemize}

\ch is to divide any communication between nodes into 3 stages: 1) From the source to the local \ch, 2) From the local \ch to the \ch closest to the sink and 3) from the \ch closets to the sink to the sink itself\footnote{If either \ch is the sink or the source, and the first or third part is of course eliminated}. This is thus one way to decrease the number of nodes that needs to keep track of other nodes. Furthermore, if gateway nodes are employed, this can ease the routing problem, as a lengthy route is divided into shorter trips.  

However, since we are introducing a layer of centralisation, it is also clear that there must be a system in place to detect and replace a \ch should it fail (and to elect it in the first place). An often used system is a voting system, or an selection algorithm (based hash value of the node's id, its MAC value etc.).

In the case of \manet where there are some hardware in which some nodes are stationary, it might be preferable to use these stationary nodes as a subset of the \ch, since these nodes status as \ch would never change.

Since we are dealing with routing between \ch now, we can exploit this in the routing:
\begin{description}
\item[The \rdg:] The \rdg is a graph scheme that employs \ch (see Section~\ref{cluster methods}) based planar graph solution. After having clustered the nodes, each \ch calculates the local Delaunay edges, and then confers with its one-hop neighbours to check which Delaunay edges are valid. Besides being planar, computable in a distributed manner, the \rdg is also a spanner, which means that using it will only make the route a constant times longer than the optimal route \cite{GeoSpanners}.
\end{description}

\subsection{Multiple-level graphs}
A logical extension to the Two-level graph is the multiple-level graph. In the multiple-level graph the $[n]$th level contains the location of the nodes on the $[n-1]$th level, for $n \geq 3$. The selection for each level can be done similar to when dealing with second-level graphs, with redefined neighbours    
 \todo{find article and cite}
